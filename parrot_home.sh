#!/bin/bash

# This script downloads several tools / files to set up a pentesting machine like I prefer them
# Keep in mind that this is barely an alpha version and it might be unstable / not working flawlessly.

name=$(logname)
sudo echo ""
echo "This script needs a bit of user interaction sometimes"
echo "Press enter to start the script"
read 

echo "Download List files for gobuster/hashcat/LFI/etc. ? (Y/N)"
read download_lists
sudo echo "Starting configuration"

# Deleting desktop Icons
cd /home/$name/Desktop
rm anon-gui.desktop codium.desktop encryptpad.desktop libreoffice-startcenter.desktop torbrowser.desktop
rm parrot-zulucrypt.desktop parrot-sirikali.desktop password.txt README.license


mkdir /home/$name/Software 
mkdir /home/$name/Shells


# apt-get

sudo wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
sudo echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list

arr=("gem" "nmap" "hashcat" "john" "terminator" "wireshark" "gobuster" "dirbuster" "git" 
	"strace" "ltrace" "radare2" "radare2-cutter" "smbmap" "exploitdb" "mingw-w64" "vim"
	"tcpdump" "burpsuite" "python3-pip" "apt-transport-https" "sublime-text" "metasploit-framework"
    "smbclient" "nfs-common" "hydra" "hydra-gtk") 

sudo apt update -y && sudo apt upgrade -y && sudo apt autoremove -y


for i in "${arr[@]}"; do
	sudo apt install $i -y  2>>~/error.log
done

sudo gem install evil-winrm
echo Installed evil-winrm

#Pip for python 2.x
curl https://bootstrap.pypa.io/pip/2.7/get-pip.py --output get-pip.py
sudo python2 get-pip.py
rm get-pip.py


# Installing pip modules

python3 -m pip install pyldap
python2 -m pip install requests


# Github and 3rd party software stuff
cd /home/$name/Software


git clone https://github.com/SecureAuthCorp/impacket.git
pip3 install impacket/ 2>>~/error.log

git clone https://github.com/helviojunior/MS17-010.git
git clone https://github.com/samratashok/nishang.git
git clone https://github.com/rasta-mouse/Sherlock.git # Checking for windows exploits
git clone https://github.com/ropnop/windapsearch.git



# Lists

if [[ $download_lists == 'Y' || $download_lists == 'y' ]]; then

    mkdir /home/$name/Lists 
    mkdir /home/$name/Lists/LFI 
    mkdir /home/$name/Lists/gobuster 
    mkdir /home/$name/Lists/Wordlists 

    cd /home/$name/Lists/LFI
    wget https://raw.githubusercontent.com/danielmiessler/SecLists/master/Fuzzing/LFI/LFI-gracefulsecurity-windows.txt -O LFI-Windows.txt
    wget https://raw.githubusercontent.com/danielmiessler/SecLists/master/Fuzzing/LFI/LFI-gracefulsecurity-linux.txt -O LFI-Linux.txt
    wget https://raw.githubusercontent.com/danielmiessler/SecLists/master/Fuzzing/LFI/LFI-LFISuite-pathtotest.txt -O LFI-Linux-Paths.txt
    wget https://raw.githubusercontent.com/danielmiessler/SecLists/master/Fuzzing/LFI/LFI-LFISuite-pathtotest-huge.txt -O LFI-Linux-Paths-Huge.txt
    wget https://raw.githubusercontent.com/danielmiessler/SecLists/master/Fuzzing/LFI/LFI-Jhaddix.txt -O LFI-Jhaddix.txt

    cd /home/$name/Lists/gobuster
    wget https://raw.githubusercontent.com/nop-tech/Pentesting/main/wordlists/gobuster/Gobuster-Dir-Small.txt -O Gobuster-Dir-Small.txt
    wget https://raw.githubusercontent.com/nop-tech/Pentesting/main/wordlists/gobuster/Gobuster-Dir-Medium.txt -O Gobuster-Dir-Medium.txt
    wget https://raw.githubusercontent.com/nop-tech/Pentesting/main/wordlists/gobuster/Gobuster-Dir-Big.txt -O Gobuster-Dir-Big.txt
    wget https://raw.githubusercontent.com/nop-tech/Pentesting/main/wordlists/gobuster/Gobuster-Apache-User-Enum.txt -O Gobuster-Apache-User-Enum.txt
    wget https://raw.githubusercontent.com/nop-tech/Pentesting/main/wordlists/gobuster/directory_big_kali_version.txt -O kali_big.txt

    cd /home/$name/Lists/Wordlists
    wget https://download.weakpass.com/wordlists/90/rockyou.txt.gz
    gzip -d rockyou.txt.gz

fi

# Shells
cd /home/$name/Shells
wget https://raw.githubusercontent.com/pentestmonkey/php-reverse-shell/master/php-reverse-shell.php -O php-shell-pentestmonkey.php



# Fixing permissions

sudo chown -R user:user /home/$name/*

# Stuff that needs user interaction

